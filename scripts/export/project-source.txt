Oct 30 16:57:25 erosj server[298631]: [2025-10-30 16:57:25] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:844 in bool Http1Server::forward_data(int, int, const std::string&)] 📈 Отправлено 8200 байт чанка, всего 8200/8200
Oct 30 16:57:25 erosj server[298631]: [2025-10-30 16:57:25] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:848 in bool Http1Server::forward_data(int, int, const std::string&)] ✅ Успешно отправлен чанк №20
Oct 30 16:57:25 erosj server[298631]: [2025-10-30 16:57:25] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:807 in bool Http1Server::forward_data(int, int, const std::string&)] 📦 Отправка чанка №21 размером 4171 байт (общий размер тела: 168011, offset: 163840)
Oct 30 16:57:25 erosj server[298631]: [2025-10-30 16:57:25] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:844 in bool Http1Server::forward_data(int, int, const std::string&)] 📈 Отправлено 4179 байт чанка, всего 4179/4179
Oct 30 16:57:25 erosj server[298631]: [2025-10-30 16:57:25] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:848 in bool Http1Server::forward_data(int, int, const std::string&)] ✅ Успешно отправлен чанк №20
Oct 30 16:57:25 erosj server[298631]: [2025-10-30 16:57:25] ✅[SUCCESS] [/var/www/erosj/src/server/async/http1_server.cpp:863 in bool Http1Server::forward_data(int, int, const std::string&)] ✅ Файл успешно отправлен с использованием chunked-кодировки (168011 байт тела)
Oct 30 16:57:25 erosj server[298631]: [2025-10-30 16:57:25] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:420 in void Http1Server::handle_io_events()] ⬅️ forward_data вернул: true (соединение сохранено)
Oct 30 16:57:25 erosj server[298631]: [2025-10-30 16:57:25] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:434 in void Http1Server::handle_io_events()] ⏱️ Обновлён таймаут для client_fd=5: 1761832645
Oct 30 16:57:25 erosj server[298631]: [2025-10-30 16:57:25] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:480 in void Http1Server::handle_io_events()] 🔚 Конец обработки IO событий
Oct 30 16:57:56 erosj server[298631]: [2025-10-30 16:57:56] 🔵[INFO] [/var/www/erosj/src/server/async/http1_server.cpp:149 in bool Http1Server::run()] TCP-соединение закрыто по таймауту: клиент 5
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 🔵[INFO] [/var/www/erosj/src/server/async/http1_server.cpp:215 in void Http1Server::handle_new_connection()] 🟢 Новое соединение от клиента: 10.8.0.1:56284 (fd=5)
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:226 in void Http1Server::handle_io_events()] 🔍 Начало обработки IO событий. Количество активных соединений: 1
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 🔵[INFO] [/var/www/erosj/src/server/async/http1_server.cpp:230 in void Http1Server::handle_io_events()] 🔁 Обработка соединения: client_fd=5 (backend_fd=-1)
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:247 in void Http1Server::handle_io_events()] ⏳ Вызов select() для client_fd=5, timeout=10ms
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:254 in void Http1Server::handle_io_events()] ⏱️ select() вернул 0 (таймаут) для client_fd=5
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:480 in void Http1Server::handle_io_events()] 🔚 Конец обработки IO событий
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:226 in void Http1Server::handle_io_events()] 🔍 Начало обработки IO событий. Количество активных соединений: 1
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 🔵[INFO] [/var/www/erosj/src/server/async/http1_server.cpp:230 in void Http1Server::handle_io_events()] 🔁 Обработка соединения: client_fd=5 (backend_fd=-1)
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:247 in void Http1Server::handle_io_events()] ⏳ Вызов select() для client_fd=5, timeout=10ms
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 🔵[INFO] [/var/www/erosj/src/server/async/http1_server.cpp:383 in void Http1Server::handle_io_events()] 📥 FD_ISSET(client_fd=5) == true — данные доступны для чтения
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:388 in void Http1Server::handle_io_events()] 📡 recv(client_fd=5, buffer_size=8192) вернул bytes_read=411
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 🔵[INFO] [/var/www/erosj/src/server/async/http1_server.cpp:389 in void Http1Server::handle_io_events()] ✅  ( 1 )  Полный запрос от клиента (411 байт):
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 🔵[INFO] [/var/www/erosj/src/server/async/http1_server.cpp:394 in void Http1Server::handle_io_events()] ✅  ( 2 )  Полный запрос от клиента (411 байт):
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:410 in void Http1Server::handle_io_events()] 📝 Содержимое запроса (первые 512 байт, только печатаемые символы):
Oct 30 17:03:24 erosj server[298631]: GET /favicon-16x16.png HTTP/1.1??Host: erosj.com??Sec-Fetch-Site: none??Connection: keep-alive??Sec-Fetch-Mode: navigate??Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8??User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.6 Safari/605.1.15??Accept-Language: ru??Sec-Fetch-Dest: document??Accept-Encoding: gzip, deflate, br????
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:418 in void Http1Server::handle_io_events()] ➡️ Вызов forward_data(client_fd=5, to_fd=-1)
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:485 in bool Http1Server::forward_data(int, int, const std::string&)] 🔄 Начало forward_data(from_fd=5, to_fd=-1, request_str.size=411)
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:498 in bool Http1Server::forward_data(int, int, const std::string&)] 🎯 Первая строка запроса: 'GET /favicon-16x16.png HTTP/1.1'
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 🔵[INFO] [/var/www/erosj/src/server/async/http1_server.cpp:513 in bool Http1Server::forward_data(int, int, const std::string&)] 🔍 Обработка запроса на favicon PNG: 'GET /favicon-16x16.png HTTP/1.1'
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:525 in bool Http1Server::forward_data(int, int, const std::string&)] 📌 Позиция начала размера: 14
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:529 in bool Http1Server::forward_data(int, int, const std::string&)] 📌 Позиция конца '.png': 18
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 🔵[INFO] [/var/www/erosj/src/server/async/http1_server.cpp:535 in bool Http1Server::forward_data(int, int, const std::string&)] ✅ Размер favicon: '6x16'
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:540 in bool Http1Server::forward_data(int, int, const std::string&)] 🔧 Нормализованный размер: '6_16'
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/content_handler.cpp:507 in std::string OnlyWhim::ContentHandler::get_main_favicon_png(const std::string&) const] Вход в функцию get_main_favicon_png: hash='6_16'
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] ❌[ERROR] [/var/www/erosj/src/server/content_handler.cpp:521 in std::string OnlyWhim::ContentHandler::get_main_favicon_png(const std::string&) const] ❌ Не найден favicon png для хэша: 6_16
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:544 in bool Http1Server::forward_data(int, int, const std::string&)] 📥 Данные favicon PNG получены. Размер: 0 байт
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/content_handler.cpp:438 in std::string OnlyWhim::ContentHandler::generate_html(int) const] Генерация HTML страницы: status_code=404
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 🔵[INFO] [/var/www/erosj/src/server/content_handler.cpp:444 in std::string OnlyWhim::ContentHandler::generate_html(int) const] Генерация страницы 404
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/content_handler.cpp:336 in std::span<const std::basic_string_view<char> > OnlyWhim::ContentHandler::get_css_hashes() const] Возвращаем vendor hashes
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/content_handler.cpp:331 in std::span<const std::basic_string_view<char> > OnlyWhim::ContentHandler::get_vendor_hashes() const] Возвращаем vendor hashes
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/html_renderer.cpp:151 in static std::string OnlyWhim::HtmlRenderer::error_404(std::span<const std::basic_string_view<char> >, std::span<const std::basic_string_view<char> >)] Генерация error_404: vendor_hashes.size=15
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/html_renderer.cpp:104 in static std::string OnlyWhim::HtmlRenderer::render_layout(const std::string&, const std::string&, std::span<const std::basic_string_view<char> >, std::span<const std::basic_string_view<char> >, const std::string&)] Генерация layout: title='404 Not Found', cls='light', vendor_hashes.size=15
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/html_renderer.cpp:30 in static std::string OnlyWhim::HtmlRenderer::head(const std::string&, std::span<const std::basic_string_view<char> >, std::span<const std::basic_string_view<char> >)] Генерация head: title='404 Not Found', vendor_hashes.size=15
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/html_renderer.cpp:88 in static std::string OnlyWhim::HtmlRenderer::body(const std::string&, const std::string&)] Генерация body: cls='light', content.length=63
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] ❌[ERROR] [/var/www/erosj/src/server/async/http1_server.cpp:557 in bool Http1Server::forward_data(int, int, const std::string&)] ❌ Не удалось получить данные для favicon-6x16.png — возвращаем 404
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 🔵[INFO] [/var/www/erosj/src/server/async/http1_server.cpp:734 in bool Http1Server::forward_data(int, int, const std::string&)] 📤 Готовимся отправить ответ с chunked-кодировкой (2077 байт тела) в сокет 5
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:738 in bool Http1Server::forward_data(int, int, const std::string&)] 🎯 Отправка ответа размером 2077 байт в сокет 5
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:789 in bool Http1Server::forward_data(int, int, const std::string&)] 📈 Отправлено 113 байт заголовков, всего 113/113
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] ✅[SUCCESS] [/var/www/erosj/src/server/async/http1_server.cpp:792 in bool Http1Server::forward_data(int, int, const std::string&)] ✅ Заголовки успешно отправлены (113 байт)
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:807 in bool Http1Server::forward_data(int, int, const std::string&)] 📦 Отправка чанка №1 размером 2077 байт (общий размер тела: 2077, offset: 0)
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:844 in bool Http1Server::forward_data(int, int, const std::string&)] 📈 Отправлено 2084 байт чанка, всего 2084/2084
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:848 in bool Http1Server::forward_data(int, int, const std::string&)] ✅ Успешно отправлен чанк №0
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] ✅[SUCCESS] [/var/www/erosj/src/server/async/http1_server.cpp:863 in bool Http1Server::forward_data(int, int, const std::string&)] ✅ Файл успешно отправлен с использованием chunked-кодировки (2077 байт тела)
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:420 in void Http1Server::handle_io_events()] ⬅️ forward_data вернул: true (соединение сохранено)
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:434 in void Http1Server::handle_io_events()] ⏱️ Обновлён таймаут для client_fd=5: 1761833004
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:480 in void Http1Server::handle_io_events()] 🔚 Конец обработки IO событий
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 🔵[INFO] [/var/www/erosj/src/server/async/http1_server.cpp:215 in void Http1Server::handle_new_connection()] 🟢 Новое соединение от клиента: 10.8.0.1:56290 (fd=6)
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:226 in void Http1Server::handle_io_events()] 🔍 Начало обработки IO событий. Количество активных соединений: 2
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 🔵[INFO] [/var/www/erosj/src/server/async/http1_server.cpp:230 in void Http1Server::handle_io_events()] 🔁 Обработка соединения: client_fd=6 (backend_fd=-1)
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:247 in void Http1Server::handle_io_events()] ⏳ Вызов select() для client_fd=6, timeout=10ms
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:254 in void Http1Server::handle_io_events()] ⏱️ select() вернул 0 (таймаут) для client_fd=6
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 🔵[INFO] [/var/www/erosj/src/server/async/http1_server.cpp:230 in void Http1Server::handle_io_events()] 🔁 Обработка соединения: client_fd=5 (backend_fd=-1)
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:247 in void Http1Server::handle_io_events()] ⏳ Вызов select() для client_fd=5, timeout=10ms
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:254 in void Http1Server::handle_io_events()] ⏱️ select() вернул 0 (таймаут) для client_fd=5
Oct 30 17:03:24 erosj server[298631]: [2025-10-30 17:03:24] 💟[DEBUG] [/var/www/erosj/src/server/async/http1_server.cpp:480 in void Http1Server::handle_io_events()] 🔚 Конец обработки IO событий
Oct 30 17:03:55 erosj server[298631]: [2025-10-30 17:03:55] 🔵[INFO] [/var/www/erosj/src/server/async/http1_server.cpp:149 in bool Http1Server::run()] TCP-соединение закрыто по таймауту: клиент 6
Oct 30 17:03:55 erosj server[298631]: [2025-10-30 17:03:55] 🔵[INFO] [/var/www/erosj/src/server/async/http1_server.cpp:149 in bool Http1Server::run()] TCP-соединение закрыто по таймауту: клиент 5